<div class="d-flex justify-content-end">
  <button mat-icon-button class="no-border-icon" [matMenuTriggerFor]="chartMenu" aria-label="Select charts to display">
    <mat-icon>more_vert</mat-icon>
  </button>
  <mat-menu #chartMenu="matMenu">
    <div (click)="$event.stopPropagation()">
      <mat-checkbox
        *ngFor="let chart of availableCharts"
        [checked]="selectedCharts.includes(chart.key)"
        (change)="toggleChartSelection(chart.key)"
        style="display: block; padding: 8px 16px;"
      >
        {{ chart.label }}
      </mat-checkbox>
    </div>
  </mat-menu>
  <!-- <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Select Charts to Display</mat-label>
    <mat-select multiple [(value)]="selectedCharts" (selectionChange)="saveSelectedCharts()">
      <mat-option *ngFor="let chart of availableCharts" [value]="chart.key">
        {{ chart.label }}
      </mat-option>
    </mat-select>
  </mat-form-field> -->
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('totalLitigation')">
  <strong>Total Litigation Cases & Status</strong>
  <app-pie-chart [data]="Statusdata"></app-pie-chart>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('plaintiffType')">
  <strong>Total Litigation Cases Filed by Plaintiff according to Plaintiff
    type.</strong>
  <app-pie-chart [data]="plaintiffTypeData"></app-pie-chart>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('defendantType')">
  <strong>Total Litigation Cases Filed by Defendent according to Defendent
    type.</strong>
  <app-pie-chart [data]="defendantTypeData"></app-pie-chart>
</div>
<div class="chart-item1"  *ngIf="selectedCharts.includes('casesByOc')">
  <strong>Total Cases by OC</strong>
  <app-pie-chart [data]="casesByOc"></app-pie-chart>
</div>
<!-- <div class="chart-item1"  *ngIf="selectedCharts.includes('transferred')">
  <strong>Total Cases transferred from OC to NPE</strong>
  <app-doughtnut-chart [data]="transferredCases" [titleContent]="transferredCases[0].value"></app-doughtnut-chart>
</div> -->
<div class="chart-item1" *ngIf="selectedCharts.includes('industry')">
  <strong>Industry</strong>
  <app-pie-chart [data]="industryData"></app-pie-chart>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('techCategory')">
  <strong>Tech Category</strong>
  <canvas
    baseChart
    [data]="barChartDataTechCategory"
    [type]="barChartTypeTechCategory"
    [options]="barChartOptionsTechCategory"
  >
  </canvas>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('mostSuedTechAreas')">
  <strong>Most Sued Tech Areas</strong>
  <canvas
    baseChart
    [data]="barChartData" 
    [options]="barChartOptions" 
    [type]="barChartTypeMostSuedTechAreas"
    (chartHover)="chartHovered($event)"
    (chartClick)="chartClicked($event)"
  >
  </canvas>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('mostSuedCompanies')">
  <strong>Most Sued Companies</strong>
  <canvas
    baseChart
    [data]="barChartDataSuedCompanies" 
    [options]="barChartOptions" 
    [type]="barChartTypeMostSuedTechAreas"
    (chartHover)="chartHovered($event)"
    (chartClick)="chartClicked($event)"
  >
  </canvas>
</div>
<div class="chart-item1" *ngIf="selectedCharts.includes('topPlaintiffs')">
  <strong>Top Plaintiff</strong>
  <canvas
    baseChart
    [data]="barChartDataTopPlaintiffs"
    [type]="barChartTypeTopPlaintiffs"
    [options]="barChartOptionsTopPlaintiffs"
  >
  </canvas>
  </div>
  <div class="chart-item1" *ngIf="selectedCharts.includes('topDefendants')">
    <strong>Top Defendants</strong>
    <canvas
      baseChart
      [data]="barChartDataTopDefandants"
      [type]="barChartTypeTopDefandants"
      [options]="barChartOptionsTopDefandants"
    >
    </canvas>
  </div>
  <div class="chart-item1" *ngIf="selectedCharts.includes('topPlaintiffFirm')">
    <strong>Top Plaintiff Law Firm</strong>
    <canvas
      baseChart
      [data]="barChartDataTopPlaintiffFirm"
      [type]="barChartTypeTopPlaintiffFirm"
      [options]="barChartOptionsTopPlaintiffFirm"
    >
  </canvas>
  </div>
  <!-- Top Defendant Law Firm -->
  <div class="chart-item1" *ngIf="selectedCharts.includes('topDefendantsFirm')">
    <strong>Top Defendant Law Firm</strong>
    <canvas
      baseChart
      [data]="barChartDataTopDefandantFirm"
      [type]="barChartTypeTopDefandantFirm"
      [options]="barChartOptionsTopDefandantFirm"
    >
  </canvas>
  </div>
  <div class="chart-item1" *ngIf="selectedCharts.includes('overlappingfirm')">
    <strong>Overlapping Law Firm</strong>
    <!-- <div id="stacked-bar-chart-container"></div> -->
     <app-stacked-bar-chart [data]="overlappingLawFirms"></app-stacked-bar-chart>
  </div>
  <div class="chart-item1" *ngIf="selectedCharts.includes('overlappingparty')">
    <strong>Overlapping Parties</strong>
    <!-- <div id="stacked-bar-chart-container"></div> -->
     <app-stacked-bar-chart [data]="overlappingParties"></app-stacked-bar-chart>
  </div>

<ng-template #loading>
  <div
    style="
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      padding: 20px;
      height: 150vh;
    "
  >
    <div><mat-spinner></mat-spinner></div>
    <div><p>Loading Analytics...</p></div>
  </div>
</ng-template>
